<!-- Section Title -->
<h2 class="section-title">Assign General Permission to Teacher</h2>
<p>User ID: {{ user.id }}</p>

<!-- Form to submit assigned permissions -->
<form method="POST" action="{% url 'guest_assign_permissions' user.pk %}">
    {% csrf_token %}
    
    <!-- Permissions Table -->
    <table>
        <thead>
            <tr>
                <!-- Checkbox to select all modules -->
                <th style="width: 5%;"><input type="checkbox" id="select-all"></th>
                <th style="width: 25%;">MODULE</th>
                <th style="width: 70%;">PERMISSIONS</th>
            </tr>
        </thead>
        <tbody>

        <!-- === Profile Module Permissions === -->
        <tr>
            <td class="checkbox-container">
                <!-- Module checkbox -->
                <input type="checkbox" class="module-checkbox" name="module" value="profile">
            </td>
            <td>Profile</td>
            <td class="permission-column">
                <!-- Manage -->
                <div class="permission-item">
                    <input type="checkbox" class="permission-checkbox" name="can_manage" value="True"
                        {% if user.profile_permissions.first.can_manage %}checked{% endif %}>
                    <label>Manage</label>
                </div>
                <!-- Create -->
                <div class="permission-item">
                    <input type="checkbox" class="permission-checkbox" name="can_create" value="True"
                        {% if user.profile_permissions.first.can_create %}checked{% endif %}>
                    <label>Create</label>
                </div>
                <!-- Edit -->
                <div class="permission-item">
                    <input type="checkbox" class="permission-checkbox" name="can_edit" value="True"
                        {% if user.profile_permissions.first.can_edit %}checked{% endif %}>
                    <label>Edit</label>
                </div>
                <!-- Delete -->
                <div class="permission-item">
                    <input type="checkbox" class="permission-checkbox" name="can_delete" value="True"
                        {% if user.profile_permissions.first.can_delete %}checked{% endif %}>
                    <label>Delete</label>
                </div>
            </td>
        </tr>

        <!-- === Categories Module Permissions === -->
        <tr>
            <td><input type="checkbox" class="module-checkbox" name="module" value="categories"></td>
            <td>Categories</td>
            <td class="permission-column">
                <div class="permission-item">
                    <input type="checkbox" name="manage_categories" value="True"
                        {% if user.profile_permissions.first.manage_categories %}checked{% endif %}>
                    <label> Manage</label>
                </div>
                <div class="permission-item">
                    <input type="checkbox" name="create_categories" value="True"
                        {% if user.profile_permissions.first.create_categories %}checked{% endif %}>
                    <label>Create</label>
                </div>
                <div class="permission-item">
                    <input type="checkbox" name="edit_categories" value="True"
                        {% if user.profile_permissions.first.edit_categories %}checked{% endif %}>
                    <label>Edit</label>
                </div>
                <div class="permission-item">
                    <input type="checkbox" name="delete_categories" value="True"
                        {% if user.profile_permissions.first.delete_categories %}checked{% endif %}>
                    <label>Delete</label>
                </div>
            </td>
        </tr>

        <!-- === Repeat for all other modules: Instructor, Levels, Language, etc. === -->
        <!-- Each module has: module checkbox + permission items (Manage, Create, Edit, Delete) -->
        <!-- Just like the above blocks -->

        <!-- === Instructor Module Permissions === -->
        <!-- Similar structure for: manage_Instructor, create_Instructor, edit_Instructor, delete_Instructor -->

        <!-- === Levels Module Permissions === -->
        <!-- Similar structure for: manage_Levels, create_Levels, edit_Levels, delete_Levels -->

        <!-- === Language Module Permissions === -->
        <!-- Similar structure for: manage_Language, create_Language, edit_Language, delete_Language -->

        <!-- === Course Module Permissions === -->
        <!-- Similar structure for: manage_Course, create_Course, edit_Course, delete_Course -->

        <!-- === Lesson Module Permissions === -->
        <!-- Similar structure for: manage_Lesson, create_Lesson, edit_Lesson, delete_Lesson -->

        <!-- === CourseResource Module Permissions === -->
        <!-- Similar structure for: manage_CourseResource, create_CourseResource, edit_CourseResource, delete_CourseResource -->

        <!-- === What_u_learn Module Permissions === -->
        <!-- Similar structure for: manage_What_u_learn, create_What_u_learn, edit_What_u_learn, delete_What_u_learn -->

        <!-- === Requirements Module Permissions === -->
        <!-- Similar structure for: manage_Requirements, create_Requirements, edit_Requirements, delete_Requirements -->

        <!-- === VideoModels Module Permissions === -->
        <!-- Similar structure for: manage_VideoModels, create_VideoModels, edit_VideoModels, delete_VideoModels -->

        <!-- === Quiz Module Permissions === -->
        <!-- Similar structure for: manage_Quiz, create_Quiz, edit_Quiz, delete_Quiz -->

        </tbody>
    </table>

    <!-- Submit button to assign permissions -->
    <button type="submit" class="submit-btn">Assign Permissions</button>

    <!-- Displaying current permissions of user for confirmation -->
    {% with user.profile_permissions.first as permission %}
      {% if permission %}
        <ul>
            <!-- Each line below displays the current status of each permission -->
            <!-- Using yesno filter to convert True/False to Yes/No -->
            <li>Can Manage: {{ permission.can_manage|yesno:"Yes,No" }}</li>
            <li>Can Create: {{ permission.can_create|yesno:"Yes,No" }}</li>
            <li>Can Edit: {{ permission.can_edit|yesno:"Yes,No" }}</li>
            <li>Can Delete: {{ permission.can_delete|yesno:"Yes,No" }}</li>

            <!-- Repeated for every module and permission combination -->
            <!-- You can add similar comments if you break each module block above -->

        </ul>
      {% endif %}
    {% endwith %}
</form>
